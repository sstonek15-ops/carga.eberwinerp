
      </ol>
    </details>

    <div class="grid">
      <div class="card"><div class="label">Jugador</div><div class="value" id="playerId">SteamID64: —</div></div>
      <div class="card"><div class="label">Época</div><div class="value">Actualidad</div></div>
      <div class="card"><div class="label">Trama actual</div><div class="value">Bienvenidos a Hogwarts</div></div>
      <div class="card"><div class="label">Copa Ganada</div><div class="value">—</div></div>
    </div>

    <div class="bar"><div id="progress"></div></div>

    <div class="foot">
      <div class="tips"><span id="tip">Consejo: consulta /reglas para más detalle.</span></div>
      <div class="small" id="hostname">eberwinerp.com</div>
    </div>

    <p class="small" style="opacity:.75;margin-top:10px">¿Problemas de conexión? Revisa tu caché de Workshop o visita nuestro <a class="link" href="https://discord.gg/tuCodigo" target="_blank" rel="noopener">Discord</a>.</p>
  </div>

  <script>
    // Helpers y demo
    const $ = id => document.getElementById(id);
    const qs = new URLSearchParams(location.search);
    if (qs.get('steamid')) $('playerId').textContent = 'SteamID64: ' + qs.get('steamid');

    // Progreso demo
    const bar = $('progress'); let p = 0; (function tick(){ p = Math.min(100, p + (Math.random()*8 + 2)); bar.style.width = p + '%'; if (p < 96) setTimeout(tick, 420); })();

    // Tips demo
    const tips = [
      'Consejo: usa /report para contactar con el staff.',
      'Consejo: rolea lesiones y evita powergaming.',
      'Consejo: respeta el rol y evita metagaming.',
      'Consejo: /discord para unirte a la comunidad.'
    ];
    setInterval(()=>{ $('tip').textContent = tips[Math.floor(Math.random()*tips.length)]; }, 4000);

    // ===== Destellos globales =====
    const canvas = $('magicBG'); const ctx = canvas.getContext('2d'); let W,H;
    function resize(){ W = canvas.width = innerWidth; H = canvas.height = innerHeight; } resize(); addEventListener('resize', resize);

    // paleta: azul, dorado, blanco
    const palette = [ {h:210,s:'100%',l:'70%'}, {h:45,s:'100%',l:'60%'}, {h:0,s:'0%',l:'100%'} ];

    // Partículas flotantes (motas) + estrellas y cometas ocasionales
    let motas = [], estrellas = [], cometas = [];

    function spawnMotas(n){
      for(let i=0;i<n;i++){
        const c = palette[Math|Math.random()*palette.length];
        motas.push({ x:Math.random()*W, y:Math.random()*H, vx:(Math.random()-.5)*0.2, vy:-(.15+Math.random()*0.35), r:Math.random()*1.4+.5, life: .5+Math.random()*1.5, color:c });
      }
    }
    function spawnEstrella(){
      const c = palette[Math|Math.random()*palette.length];
      estrellas.push({ x:Math.random()*W, y:Math.random()*H, r:Math.random()*1.2+.6, rot:Math.random()*Math.PI, vr:(Math.random()-.5)*0.01, life:1, color:c });
      setTimeout(spawnEstrella, 700 + Math.random()*1400);
    }
    function spawnCometa(){
      const side = Math.random()<.5 ? 'left' : 'right';
      const y = Math.random()*H*0.8 + H*0.1; // evitar bordes
      const speed = 2.2 + Math.random()*1.8;
      const c = palette[Math|Math.random()*palette.length];
      cometas.push({ x: side==='left' ? -50 : W+50, y, vx: side==='left'? speed : -speed, vy:(Math.random()-.5)*0.4, len: 80+Math.random()*80, color:c, life:1 });
      setTimeout(spawnCometa, 4500 + Math.random()*6000);
    }

    spawnMotas(160); spawnEstrella(); spawnCometa();

    function glow(x,y,r,color,a){ const g=ctx.createRadialGradient(x,y,0,x,y,r*3.2); g.addColorStop(0,`hsla(${color.h},${color.s},${color.l},${0.85*a})`); g.addColorStop(1,'rgba(255,255,255,0)'); ctx.fillStyle=g; ctx.beginPath(); ctx.arc(x,y,r*3.2,0,Math.PI*2); ctx.fill(); ctx.beginPath(); ctx.fillStyle=`hsla(${color.h},${color.s},${color.l},${a})`; ctx.arc(x,y,r,0,Math.PI*2); ctx.fill(); }
    function crossStar(x,y,r,rot,color,a){ ctx.save(); ctx.translate(x,y); ctx.rotate(rot); ctx.globalAlpha=a; ctx.strokeStyle=`hsla(${color.h},${color.s},${color.l},0.9)`; ctx.lineWidth=1; ctx.beginPath(); ctx.moveTo(-r*3,0); ctx.lineTo(r*3,0); ctx.moveTo(0,-r*3); ctx.lineTo(0,r*3); ctx.stroke(); const g=ctx.createRadialGradient(0,0,0,0,0,r*5); g.addColorStop(0,`hsla(${color.h},${color.s},${color.l},0.55)`); g.addColorStop(1,'rgba(255,255,255,0)'); ctx.fillStyle=g; ctx.beginPath(); ctx.arc(0,0,r*5,0,Math.PI*2); ctx.fill(); ctx.restore(); }

    function loop(){
      ctx.clearRect(0,0,W,H);
      // motas ascendiendo
      for(let i=motas.length-1;i>=0;i--){ const p=motas[i]; p.x+=p.vx; p.y+=p.vy; p.life-=0.0025; if(p.y<-10||p.life<=0){ motas[i]={ x:Math.random()*W, y:H+10, vx:(Math.random()-.5)*0.2, vy:-(.15+Math.random()*0.35), r:Math.random()*1.4+.5, life:.5+Math.random()*1.5, color:palette[Math|Math.random()*palette.length] }; continue; } glow(p.x,p.y,p.r,p.color,Math.max(.3,p.life)); }
      // estrellas
      for(let i=estrellas.length-1;i>=0;i--){ const s=estrellas[i]; s.rot+=s.vr; s.life-=0.0035; if(s.life<=0){ estrellas.splice(i,1); continue; } crossStar(s.x,s.y,s.r,s.rot,s.color,s.life); }
      // cometas
      for(let i=cometas.length-1;i>=0;i--){ const c=cometas[i]; c.x+=c.vx; c.y+=c.vy; c.life-=0.004; if((c.vx>0 && c.x>W+100) || (c.vx<0 && c.x<-100) || c.life<=0){ cometas.splice(i,1); continue; } // rastro
        const steps = 10; for(let k=0;k<steps;k++){ const t=k/steps; glow(c.x - c.vx*4*t, c.y - c.vy*4*t, (1-t)*1.8+0.4, c.color, (1-t)*0.9); } }
      requestAnimationFrame(loop);
    }
    loop();
  </script>
</body>
</html>
